<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="seekurjr" >
       
<!-- Gazebo Base Configuration -->

<!--
  <gazebo reference="base_link">
    <material>Gazebo/Blue</material>
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
 -->

	<gazebo reference="fr_wheel">
    <!-- kp and kd for rubber -->
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>

    <fdir1>0 1 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
		<material>Gazebo/Grey</material>
	</gazebo>

	<gazebo reference="br_wheel">
    <!-- kp and kd for rubber -->
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>

    <fdir1>0 1 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
		<material>Gazebo/Grey</material>
	</gazebo>

	<gazebo reference="fl_wheel">
    <!-- kp and kd for rubber -->
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>

    <fdir1>0 1 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
		<material>Gazebo/Grey</material>
	</gazebo>

	<gazebo reference="bl_wheel">
    <!-- kp and kd for rubber -->
    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <mu1>0.2</mu1>
    <mu2>0.2</mu2>

    <fdir1>0 1 0</fdir1>
    <maxVel>1.0</maxVel>
    <minDepth>0.00</minDepth>
		<material>Gazebo/Grey</material>
	</gazebo>
          
          
<gazebo>
  <plugin name="skid_steer_drive_controller" filename="libgazebo_ros_skid_steer_drive.so">
    <updateRate>100.0</updateRate>
    <robotNamespace>/seekurjr</robotNamespace>
    <leftFrontJoint>fl_wheel_joint</leftFrontJoint>
    <rightFrontJoint>fr_wheel_joint</rightFrontJoint>
    <leftRearJoint>bl_wheel_joint</leftRearJoint>
    <rightRearJoint>br_wheel_joint</rightRearJoint>

    <wheelSeparation>${wheel_separation}</wheelSeparation>
    <wheelDiameter>${wheel_diameter}</wheelDiameter>

    <robotBaseFrame>base_link</robotBaseFrame>
    <torque>50</torque>
    <topicName>cmd_vel</topicName>
    <commandTopic>cmd_vel</commandTopic>
    <odometryTopic>odom</odometryTopic>
    <odometryFrame>odom</odometryFrame>
    <!--
    <broadcastTF>false</broadcastTF>
    -->
    <max_force>50.0</max_force>
  </plugin>
</gazebo>

	
	<gazebo>
		<plugin filename="libgazebo_ros_p3d.so" name="gazebo_ros_p3d">
		<bodyName>base_link</bodyName>
		<topicName>/ground_truth/state</topicName>
		<alwaysOn>true</alwaysOn>
		<updateRate>100.0</updateRate>
		</plugin>
	</gazebo>

  <gazebo>
    <plugin filename="libgazebo_ros_control.so" name="ros_control">
      <robotNamespace>/seekurjr</robotNamespace>
    </plugin>
  </gazebo>

</robot>
